[2024-03-14T16:30:05.414+0000] {taskinstance.py:1979} INFO - Dependencies all met for dep_context=non-requeueable deps ti=<TaskInstance: Lead_scoring_training_pipeline.training_model manual__2024-03-14T16:29:41.910109+00:00 [queued]>
[2024-03-14T16:30:05.419+0000] {taskinstance.py:1979} INFO - Dependencies all met for dep_context=requeueable deps ti=<TaskInstance: Lead_scoring_training_pipeline.training_model manual__2024-03-14T16:29:41.910109+00:00 [queued]>
[2024-03-14T16:30:05.419+0000] {taskinstance.py:2193} INFO - Starting attempt 2 of 2
[2024-03-14T16:30:05.513+0000] {taskinstance.py:2217} INFO - Executing <Task(PythonOperator): training_model> on 2024-03-14 16:29:41.910109+00:00
[2024-03-14T16:30:05.524+0000] {standard_task_runner.py:60} INFO - Started process 1274 to run task
[2024-03-14T16:30:05.527+0000] {standard_task_runner.py:87} INFO - Running: ['airflow', 'tasks', 'run', 'Lead_scoring_training_pipeline', 'training_model', 'manual__2024-03-14T16:29:41.910109+00:00', '--job-id', '128', '--raw', '--subdir', 'DAGS_FOLDER/Lead_scoring_training_pipeline/lead_scoring_training_pipeline.py', '--cfg-path', '/tmp/tmpd0y5yw42']
[2024-03-14T16:30:05.527+0000] {standard_task_runner.py:88} INFO - Job 128: Subtask training_model
[2024-03-14T16:30:05.665+0000] {task_command.py:423} INFO - Running <TaskInstance: Lead_scoring_training_pipeline.training_model manual__2024-03-14T16:29:41.910109+00:00 [running]> on host 7c9aeec74829
[2024-03-14T16:30:05.853+0000] {taskinstance.py:2513} INFO - Exporting env vars: AIRFLOW_CTX_DAG_OWNER='airflow' AIRFLOW_CTX_DAG_ID='Lead_scoring_training_pipeline' AIRFLOW_CTX_TASK_ID='training_model' AIRFLOW_CTX_EXECUTION_DATE='2024-03-14T16:29:41.910109+00:00' AIRFLOW_CTX_TRY_NUMBER='2' AIRFLOW_CTX_DAG_RUN_ID='manual__2024-03-14T16:29:41.910109+00:00'
[2024-03-14T16:30:05.855+0000] {logging_mixin.py:188} INFO - /home/airflow
[2024-03-14T16:30:05.855+0000] {logging_mixin.py:188} INFO - ['logs', 'airflow.cfg', 'airflow.db', 'webserver_config.py', '.ipynb_checkpoints', 'dags', 'airflow-webserver.pid']
[2024-03-14T16:30:05.855+0000] {logging_mixin.py:188} INFO - /home/mlfow/
[2024-03-14T16:30:05.855+0000] {logging_mixin.py:188} INFO - Lead_scoring_mlflow_production.db
[2024-03-14T16:30:05.856+0000] {logging_mixin.py:188} INFO - unable to open database file
[2024-03-14T16:30:05.861+0000] {logging_mixin.py:188} INFO - Loading 'features' table
[2024-03-14T16:30:09.898+0000] {logging_mixin.py:188} INFO - Loading 'target' table
[2024-03-14T16:30:10.146+0000] {utils.py:201} INFO - Creating mlflow experiment
[2024-03-14T16:30:10.585+0000] {taskinstance.py:2731} ERROR - Task failed with exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.8/dist-packages/airflow/models/taskinstance.py", line 444, in _execute_task
    result = _execute_callable(context=context, **execute_callable_kwargs)
  File "/usr/local/lib/python3.8/dist-packages/airflow/models/taskinstance.py", line 414, in _execute_callable
    return execute_callable(context=context, **execute_callable_kwargs)
  File "/usr/local/lib/python3.8/dist-packages/airflow/operators/python.py", line 200, in execute
    return_value = self.execute_callable()
  File "/usr/local/lib/python3.8/dist-packages/airflow/operators/python.py", line 217, in execute_callable
    return self.python_callable(*self.op_args, **self.op_kwargs)
  File "/home/airflow/dags/Lead_scoring_training_pipeline/utils.py", line 204, in get_trained_model
    mlflow.set_experiment(EXPERIMENT)
  File "/usr/local/lib/python3.8/dist-packages/mlflow/tracking/fluent.py", line 142, in set_experiment
    experiment = client.get_experiment_by_name(experiment_name)
  File "/usr/local/lib/python3.8/dist-packages/mlflow/tracking/client.py", line 539, in get_experiment_by_name
    return self._tracking_client.get_experiment_by_name(name)
  File "/usr/local/lib/python3.8/dist-packages/mlflow/tracking/_tracking_service/client.py", line 236, in get_experiment_by_name
    return self.store.get_experiment_by_name(name)
  File "/usr/local/lib/python3.8/dist-packages/mlflow/store/tracking/rest_store.py", line 323, in get_experiment_by_name
    response_proto = self._call_endpoint(GetExperimentByName, req_body)
  File "/usr/local/lib/python3.8/dist-packages/mlflow/store/tracking/rest_store.py", line 60, in _call_endpoint
    return call_endpoint(self.get_host_creds(), endpoint, method, json_body, response_proto)
  File "/usr/local/lib/python3.8/dist-packages/mlflow/utils/rest_utils.py", line 220, in call_endpoint
    response = verify_rest_response(response, endpoint)
  File "/usr/local/lib/python3.8/dist-packages/mlflow/utils/rest_utils.py", line 158, in verify_rest_response
    raise MlflowException(
mlflow.exceptions.MlflowException: API request to endpoint /api/2.0/mlflow/experiments/get-by-name failed with error code 404 != 200. Response body: '

<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Airflow 404</title>
    <link rel="icon" type="image/png" href="/static/pin_32.png">
  </head>
  <body>
    <div style="font-family: verdana; text-align: center; margin-top: 200px;">
      <img src="/static/pin_100.png" width="50px" alt="pin-logo" />
      <h1>Airflow 404</h1>
      <p>Page cannot be found.</p>
      <a href="/">Return to the main page</a>
      <p>redact</p>
    </div>
  </body>
</html>'
[2024-03-14T16:30:10.589+0000] {taskinstance.py:1149} INFO - Marking task as FAILED. dag_id=Lead_scoring_training_pipeline, task_id=training_model, execution_date=20240314T162941, start_date=20240314T163005, end_date=20240314T163010
[2024-03-14T16:30:10.609+0000] {standard_task_runner.py:107} ERROR - Failed to execute job 128 for task training_model (API request to endpoint /api/2.0/mlflow/experiments/get-by-name failed with error code 404 != 200. Response body: '

<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Airflow 404</title>
    <link rel="icon" type="image/png" href="/static/pin_32.png">
  </head>
  <body>
    <div style="font-family: verdana; text-align: center; margin-top: 200px;">
      <img src="/static/pin_100.png" width="50px" alt="pin-logo" />
      <h1>Airflow 404</h1>
      <p>Page cannot be found.</p>
      <a href="/">Return to the main page</a>
      <p>redact</p>
    </div>
  </body>
</html>'; 1274)
[2024-03-14T16:30:10.632+0000] {local_task_job_runner.py:234} INFO - Task exited with return code 1
[2024-03-14T16:30:10.642+0000] {taskinstance.py:3312} INFO - 0 downstream tasks scheduled from follow-on schedule check
